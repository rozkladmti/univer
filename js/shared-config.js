// ═══════════════════════════════════════════════════════════════
// СПІЛЬНИЙ КОНФІГУРАЦІЙНИЙ ФАЙЛ
// Використовується для Admin, Teacher та Student режимів
// ═══════════════════════════════════════════════════════════════

// ============================================================
// BACKEND URL - ЗМІНЮЙ ТІЛЬКИ ТУТ!
// ============================================================

const BACKEND_URL = 'https://script.google.com/macros/s/AKfycbzNbfipMXJve8w-MKDD2YBy5ueZ8UyVQcgP2iHhLB0uDOb8FDxfStZTlYgeQGp6-t0/exec';

// Автоматично створюємо URLs для всіх режимів
const GOOGLE_SCRIPT_URLS = {
    admin: BACKEND_URL,
    dean: BACKEND_URL,
    department: BACKEND_URL,
    teacher: BACKEND_URL,
    student: BACKEND_URL,
    auth: BACKEND_URL
};

// Для зворотної сумісності - встановлюється динамічно
let GOOGLE_SCRIPT_URL = BACKEND_URL;

// ============================================================
// ADMIN НАЛАШТУВАННЯ
// ============================================================

const ADMIN_PASSWORD = 'admin';

// ============================================================
// КАЛЕНДАР ТА ЧАС
// ============================================================

/**
 * Мапа днів тижня
 * Використовується для перетворення числа дня в назву
 */
const DAYS_MAP = {
    1: 'Понеділок',
    2: 'Вівторок',
    3: 'Середа',
    4: 'Четвер',
    5: 'П\'ятниця',
    6: 'Субота',
    7: 'Неділя'
};

/**
 * Порядок днів для відображення в інтерфейсі
 */
const DAYS_ORDER = ['Понеділок', 'Вівторок', 'Середа', 'Четвер', 'П\'ятниця', 'Субота'];

/**
 * Назви днів для Admin режиму (скорочений формат)
 */
const DAY_NAMES = ['', 'Понеділок', 'Вівторок', 'Середа', 'Четвер', 'П\'ятниця'];

// ============================================================
// РОЗКЛАД ПАР
// ============================================================

/**
 * Розклад пар по днях тижня
 * Формат для Admin режиму (з id полем)
 */
const TIME_SLOTS = {
    1: [ // Понеділок
        { id: 1, num: 1, time: "10:00 - 11:20", start: 10*60, end: 11*60+20 },
        { id: 2, num: 2, time: "11:35 - 12:55", start: 11*60+35, end: 12*60+55 },
        { id: 3, num: 3, time: "13:35 - 14:55", start: 13*60+35, end: 14*60+55 },
        { id: 4, num: 4, time: "15:10 - 16:30", start: 15*60+10, end: 16*60+30 },
        { id: 5, num: 5, time: "16:45 - 18:05", start: 16*60+45, end: 18*60+5 }
    ],
    2: [ // Вівторок
        { id: 1, num: 1, time: "09:00 - 10:20", start: 9*60, end: 10*60+20 },
        { id: 2, num: 2, time: "10:35 - 11:55", start: 10*60+35, end: 11*60+55 },
        { id: 3, num: 3, time: "12:35 - 13:55", start: 12*60+35, end: 13*60+55 },
        { id: 4, num: 4, time: "14:10 - 15:30", start: 14*60+10, end: 15*60+30 },
        { id: 5, num: 5, time: "15:45 - 17:05", start: 15*60+45, end: 17*60+5 }
    ],
    3: [ // Середа
        { id: 1, num: 1, time: "09:00 - 10:20", start: 9*60, end: 10*60+20 },
        { id: 2, num: 2, time: "10:35 - 11:55", start: 10*60+35, end: 11*60+55 },
        { id: 3, num: 3, time: "12:35 - 13:55", start: 12*60+35, end: 13*60+55 },
        { id: 4, num: 4, time: "14:10 - 15:30", start: 14*60+10, end: 15*60+30 },
        { id: 5, num: 5, time: "15:45 - 17:05", start: 15*60+45, end: 17*60+5 }
    ],
    4: [ // Четвер
        { id: 1, num: 1, time: "09:00 - 10:20", start: 9*60, end: 10*60+20 },
        { id: 2, num: 2, time: "10:35 - 11:55", start: 10*60+35, end: 11*60+55 },
        { id: 3, num: 3, time: "12:35 - 13:55", start: 12*60+35, end: 13*60+55 },
        { id: 4, num: 4, time: "14:10 - 15:30", start: 14*60+10, end: 15*60+30 },
        { id: 5, num: 5, time: "15:45 - 17:05", start: 15*60+45, end: 17*60+5 }
    ],
    5: [ // П'ятниця
        { id: 1, num: 1, time: "09:00 - 10:20", start: 9*60, end: 10*60+20 },
        { id: 2, num: 2, time: "10:35 - 11:55", start: 10*60+35, end: 11*60+55 },
        { id: 3, num: 3, time: "12:10 - 13:30", start: 12*60+10, end: 13*60+30 },
        { id: 4, num: 4, time: "13:45 - 15:05", start: 13*60+45, end: 15*60+5 },
        { id: 5, num: 5, time: "15:20 - 16:40", start: 15*60+20, end: 16*60+40 }
    ]
};

/**
 * Розклад пар для Teacher та Student режимів
 * Формат без id, з іншими одиницями вимірювання часу
 */
const TIME_SLOTS_RAW = {
    1: [ // Понеділок
        { num: 1, time: "10:00 - 11:20", start: 600, end: 680 },
        { num: 2, time: "11:35 - 12:55", start: 695, end: 775 },
        { num: 3, time: "13:35 - 14:55", start: 815, end: 895 },
        { num: 4, time: "15:10 - 16:30", start: 910, end: 990 },
        { num: 5, time: "16:45 - 18:05", start: 1005, end: 1085 }
    ],
    2: [ // Вівторок
        { num: 1, time: "09:00 - 10:20", start: 540, end: 620 },
        { num: 2, time: "10:35 - 11:55", start: 635, end: 715 },
        { num: 3, time: "12:35 - 13:55", start: 755, end: 835 },
        { num: 4, time: "14:10 - 15:30", start: 850, end: 930 },
        { num: 5, time: "15:45 - 17:05", start: 945, end: 1025 }
    ],
    5: [ // П'ятниця
        { num: 1, time: "09:00 - 10:20", start: 540, end: 620 },
        { num: 2, time: "10:35 - 11:55", start: 635, end: 715 },
        { num: 3, time: "12:10 - 13:30", start: 730, end: 810 },
        { num: 4, time: "13:45 - 15:05", start: 825, end: 905 },
        { num: 5, time: "15:20 - 16:40", start: 920, end: 1000 }
    ]
};

// Копіюємо слоти для інших днів
TIME_SLOTS_RAW[3] = TIME_SLOTS_RAW[2]; // Середа
TIME_SLOTS_RAW[4] = TIME_SLOTS_RAW[2]; // Четвер
TIME_SLOTS_RAW[6] = TIME_SLOTS_RAW[5]; // Субота
TIME_SLOTS_RAW[7] = TIME_SLOTS_RAW[5]; // Неділя

// ============================================================
// КАФЕДРИ
// ============================================================

/**
 * Словник кафедр з кольорами
 * Використовується як fallback, якщо дані не завантажилися з Google Таблиці
 */
const DEPARTMENT_CONFIG = {
    'MIT': { name: 'Менеджменту ІТ-сфери', color: '#3b82f6' },
    'FM': { name: 'Фізико-математичних наук', color: '#10b981' },
    'EK': { name: 'Економіки', color: '#f59e0b' },
    'VET': { name: 'Ветеринарної медицини', color: '#8b5cf6' },
    'AGRO': { name: 'Агрономії', color: '#06b6d4' },
    'UNKNOWN': { name: 'Невизначена', color: '#6b7280' }
};

// ============================================================
// HELPER FUNCTIONS
// ============================================================

/**
 * Встановити URL для поточного режиму
 * @param {string} mode - 'admin', 'teacher', або 'student'
 */
function setModeURL(mode) {
    if (GOOGLE_SCRIPT_URLS[mode]) {
        GOOGLE_SCRIPT_URL = GOOGLE_SCRIPT_URLS[mode];
    } else {
        console.warn(`Unknown mode: ${mode}, using default URL`);
        GOOGLE_SCRIPT_URL = GOOGLE_SCRIPT_URLS.student;
    }
}

// ============================================================
// ЕКСПОРТ (для модульних систем, якщо потрібно)
// ============================================================

if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        BACKEND_URL,
        GOOGLE_SCRIPT_URLS,
        GOOGLE_SCRIPT_URL,
        ADMIN_PASSWORD,
        DAYS_MAP,
        DAYS_ORDER,
        DAY_NAMES,
        TIME_SLOTS,
        TIME_SLOTS_RAW,
        DEPARTMENT_CONFIG,
        setModeURL
    };
}